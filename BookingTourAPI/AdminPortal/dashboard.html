<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>

<header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6" href="#">BookingTourAPI</a>
    <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-nav">
        <div class="nav-item text-nowrap">
            <a class="nav-link px-3" href="#" id="logout-button">Đăng xuất</a>
        </div>
    </div>
</header>

<div class="container-fluid">
    <div class="row">
        <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
            <div class="position-sticky pt-3 sidebar-sticky">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#section-dashboard" data-bs-toggle="tab">
                            <i class="bi bi-house-door-fill me-2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#section-orders" data-bs-toggle="tab">
                            <i class="bi bi-card-list me-2"></i> Quản lý Đơn hàng
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#section-users" data-bs-toggle="tab">
                            <i class="bi bi-people-fill me-2"></i> Quản lý Người dùng
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#section-cms" data-bs-toggle="tab">
                            <i class="bi bi-pencil-square me-2"></i> Quản lý Trang chủ
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#section-tours-cms" data-bs-toggle="tab">
                            <i class="bi bi-map-fill me-2"></i> Quản lý Gói Tour
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#section-reviews" data-bs-toggle="tab">
                            <i class="bi bi-star-fill me-2"></i> Quản lý Đánh giá
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#section-chat" data-bs-toggle="tab">
                            <i class="bi bi-chat-dots-fill me-2"></i> Hỗ trợ trực tuyến
                        </a>
                    </li>
                </ul>
            </div>
        </nav>

        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <div class="tab-content" id="nav-tabContent">
                
                <div class="tab-pane fade show active" id="section-dashboard" role="tabpanel">
    
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h2 class="h2">Dashboard</h2>
                        <div class="btn-toolbar mb-2 mb-md-0">
                            <button type="button" id="btn-export-pdf" class="btn btn-sm btn-outline-secondary">
                                <i class="bi bi-file-earmark-pdf-fill"></i> Xuất Báo Cáo PDF
                            </button>
                        </div>
                    </div>

                    <div id="dashboard-content-to-print" class="p-2"> <div class="row g-4 mb-4">
                            <div class="col-md-4">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        <h5 class="card-title text-muted text-uppercase small">Tổng Doanh Thu</h5>
                                        <p class="card-text fs-3 fw-bold" id="stat-total-revenue">0</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        <h5 class="card-title text-muted text-uppercase small">Đơn Chuyến bay</h5>
                                        <p class="card-text fs-3 fw-bold" id="stat-total-flights">0</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        <h5 class="card-title text-muted text-uppercase small">Đơn Tour</h5>
                                        <p class="card-text fs-3 fw-bold" id="stat-total-activities">0</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="alert alert-info">Chào mừng bạn đến với trang quản trị.</div>

                        <div class="row">
                            <div class="col-md-8">
                                <div class="card shadow-sm mb-4">
                                    <div class="card-header bg-white py-3">
                                        <h5 class="mb-0 fw-bold text-primary"><i class="bi bi-bar-chart-line-fill me-2"></i>Biểu đồ Doanh thu</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="revenueChart" style="max-height: 400px;"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card shadow-sm mb-4">
                                    <div class="card-header bg-white py-3">
                                        <h5 class="mb-0 fw-bold text-success"><i class="bi bi-pie-chart-fill me-2"></i>Tỷ trọng đơn hàng</h5>
                                    </div>
                                    <div class="card-body d-flex justify-content-center">
                                        <div style="width: 300px;">
                                            <canvas id="orderTypeChart"></canvas>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div> </div>

                <div class="tab-pane fade" id="section-orders" role="tabpanel">
                    <h2 class="mt-3 border-bottom pb-2 mb-3">Quản lý Đơn hàng</h2>
                    
                    <div class="card shadow-sm mb-4">
                        <div class="card-header"><h3>Đơn Chuyến Bay</h3></div>
                        <div class="card-body table-responsive">
                            <table id="table-flights" class="table table-striped table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th>Mã Đơn</th>
                                        <th>Ngày Đặt</th>
                                        <th>Khách Hàng</th>
                                        <th>Email</th>
                                        <th>Tổng Giá</th>
                                        <th>Trạng Thái</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card shadow-sm mb-4">
                        <div class="card-header"><h3>Đơn Tour</h3></div>
                        <div class="card border-warning mb-4 shadow-sm" id="tour-warnings-card" style="display:none;">
                            <div class="card-header bg-warning text-dark d-flex justify-content-between align-items-center">
                                <h4 class="mb-0"><i class="bi bi-exclamation-triangle-fill"></i> Cần Xử Lý: Tour Sắp Đầy (>66%)</h4>
                            </div>
                            <div class="card-body p-0">
                                <table class="table table-hover mb-0">
                                    <thead class="table-warning">
                                        <tr>
                                            <th>Tên Tour</th>
                                            <th>Ngày Khởi Hành</th>
                                            <th>Tình Trạng Chỗ</th>
                                            <th>Hành Động</th>
                                        </tr>
                                    </thead>
                                    <tbody id="table-tour-warnings">
                                        </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="card-body table-responsive">
                            <table id="table-tours" class="table table-striped table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th>Mã Đơn</th>
                                        <th>Tên Tour</th>
                                        <th>Ngày Đặt</th>
                                        <th>Tổng Giá</th>
                                        <th>Trạng Thái</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="section-users" role="tabpanel">
                    <h2 class="mt-3 border-bottom pb-2 mb-3">Quản lý Người dùng</h2>
                    <div class="card shadow-sm mb-4">
                        <div class="card-body table-responsive">
                            <table id="table-users" class="table table-striped table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th>Email</th>
                                        <th>Username</th>
                                        <th>Roles</th>
                                        <th>Trạng Thái</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="section-cms" role="tabpanel">
                    <h2 class="mt-3 border-bottom pb-2 mb-3">Quản lý Top Điểm Đến (Trang chủ)</h2>
                    <div class="card shadow-sm mb-4">
                        <div class="card-body table-responsive">
                            <button id="add-destination-btn" class="btn btn-primary mb-3">
                                <i class="bi bi-plus-circle-fill me-2"></i> Thêm Điểm đến mới
                            </button>
                            <table id="table-destinations" class="table table-striped table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th>Tên TP</th>
                                        <th>Ảnh (URL)</th>
                                        <th>Từ khóa tìm kiếm</th>
                                        <th>Loại</th>
                                        <th>Thứ tự</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="section-tours-cms" role="tabpanel">
                    <h2 class="mt-3 border-bottom pb-2 mb-3">Quản lý Gói Tour Trọn Gói</h2>
                    <div class="card shadow-sm mb-4">
                        <div class="card-body table-responsive">
                            <button id="add-tour-package-btn" class="btn btn-primary mb-3">
                                <i class="bi bi-plus-circle-fill me-2"></i> Thêm Gói Tour mới
                            </button>
                            <table id="table-tour-packages" class="table table-striped table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th>Tên Tour</th>
                                        <th>Thời lượng</th>
                                        <th>Giá (VND)</th>
                                        <th>Hành động</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="section-reviews" role="tabpanel">
                    <h2 class="mt-3 border-bottom pb-2 mb-3">Quản lý Đánh giá & Nhận xét</h2>
                    
                    <div class="card shadow-sm mb-4">
                        <div class="card-body">
                            <div class="row g-3 align-items-end">
                                <div class="col-md-4">
                                    <label for="review-tour-id" class="form-label mb-1">Lọc theo Tour ID</label>
                                    <input type="number" class="form-control" id="review-tour-id" placeholder="VD: 1">
                                </div>
                                <div class="col-md-3">
                                    <button id="btn-load-reviews" class="btn btn-primary w-100">
                                        <i class="bi bi-arrow-repeat me-1"></i> Tải dữ liệu
                                    </button>
                                </div>
                                <div class="col-md-5 text-md-end">
                                    <span class="badge bg-primary me-2 p-2">
                                        Tổng: <span id="badge-total-reviews">0</span>
                                    </span>
                                    <span class="badge bg-warning text-dark p-2">
                                        TB: <span id="badge-average-rating">0.0</span> / 5
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm">
                        <div class="card-body table-responsive">
                            <table id="table-reviews" class="table table-striped table-hover align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th style="width:50px;">ID</th>
                                        <th style="width:250px;">Tour</th>
                                        <th>User / Email</th>
                                        <th style="width:100px;">Điểm</th>
                                        <th>Nội dung</th>
                                        <th style="width:150px;">Thời gian</th>
                                        <th style="width:80px;">Xóa</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="tab-pane fade" id="section-chat" role="tabpanel">
                    <h2 class="mt-3 border-bottom pb-2 mb-3">Hỗ trợ khách hàng trực tuyến</h2>
                    
                    <div class="chat-wrapper">
                        <div class="chat-sidebar">
                            <div class="chat-sidebar-header">
                                <i class="bi bi-people-fill me-2"></i> Khách hàng cần hỗ trợ
                            </div>
                            <div class="chat-user-list" id="user-list">
                                <div class="p-4 text-center text-muted small">
                                    Chưa có tin nhắn mới.<br>
                                    (Dữ liệu sẽ hiện khi User nhắn tin)
                                </div>
                            </div>
                        </div>

                        <div class="chat-main">
                            <div class="chat-main-header" id="current-chat-user">
                                Vui lòng chọn khách hàng từ danh sách bên trái
                            </div>
                            
                            <div class="chat-main-messages" id="admin-messages">
                                </div>
                            
                            <form id="admin-chat-form" class="chat-main-input" style="display: none;">
                                <input type="text" id="admin-input" class="form-control" placeholder="Nhập tin nhắn trả lời..." autocomplete="off">
                                <button type="submit" class="btn btn-primary">
                                    <i class="bi bi-send-fill"></i> Gửi
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>
</div>

<div class="modal fade" id="edit-roles-modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Sửa Roles cho <span id="modal-user-email" class="text-primary"></span></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="modal-roles-checkboxes"></div>
                <div id="modal-error-message" class="alert alert-danger mt-3" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" id="modal-save-roles-btn" class="btn btn-primary">Lưu thay đổi</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="edit-destination-modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-dest-title">Thêm Điểm đến</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="destination-form">
                    <input type="hidden" id="dest-id">
                    <div class="mb-3">
                        <label for="dest-city-name" class="form-label">Tên hiển thị (VD: Đà nẵng)</label>
                        <input type="text" class="form-control" id="dest-city-name" required>
                    </div>
                    <div class="mb-3">
                        <label for="dest-image-url" class="form-label">Link ảnh (Mỗi link 1 dòng)</label>
                        <textarea class="form-control" id="dest-image-url" rows="5" placeholder="https://... (ảnh 1)"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="dest-search-term" class="form-label">Từ khóa tìm kiếm (VD: đà nẵng)</label>
                        <input type="text" class="form-control" id="dest-search-term" required>
                    </div>
                    <div class="mb-3">
                        <label for="dest-type" class="form-label">Loại trang</label>
                        <select class="form-select" id="dest-type" required>
                            <option value="tour">Tour</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="dest-display-order" class="form-label">Thứ tự hiển thị (Số nhỏ lên trước)</label>
                        <input type="number" class="form-control" id="dest-display-order" value="0" required>
                    </div>
                </form>
                <div id="modal-dest-error" class="alert alert-danger mt-3" style="display:none;"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" id="modal-save-dest-btn" class="btn btn-primary">Lưu</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="tour-package-modal" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modal-tour-title">Thêm/Sửa Gói Tour</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div id="modal-tour-error" class="alert alert-danger" style="display:none;"></div>
                <form id="tour-package-form">
                    <input type="hidden" id="tour-id">
                    <div class="row">
                        <div class="col-lg-6">
                            <h4>Thông tin cơ bản</h4>
                            <div class="mb-3">
                                <label for="tour-title" class="form-label">Tên Tour (Tiêu đề)</label>
                                <input type="text" class="form-control" id="tour-title" required>
                            </div>
                            <div class="mb-3">
                                <label for="tour-image-urls" class="form-label">Link ảnh (Mỗi link 1 dòng)</label>
                                <textarea class="form-control" id="tour-image-urls" rows="5" placeholder="https://..."></textarea>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="tour-duration" class="form-label">Thời lượng (VD: 5N4Đ)</label>
                                    <input type="text" class="form-control" id="tour-duration">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="tour-price" class="form-label">Giá (VND)</label>
                                    <input type="number" class="form-control" id="tour-price" value="0">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="tour-country" class="form-label">Quốc gia</label>
                                    <input type="text" class="form-control" id="tour-country">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="tour-region" class="form-label">Tỉnh thành</label>
                                    <input type="text" class="form-control" id="tour-region">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="tour-area" class="form-label">Phân loại (Vùng/Miền)</label>
                                <select class="form-select" id="tour-area">
                                    <option value="">-- Chọn phân loại --</option>
                                    <option value="MienBac">Miền Bắc</option>
                                    <option value="MienTrung">Miền Trung</option>
                                    <option value="MienNam">Miền Nam</option>
                                    <option value="NuocNgoai">Nước ngoài</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="tour-highlights" class="form-label">Điểm nổi bật</label>
                                <textarea class="form-control" id="tour-highlights" rows="3"></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="tour-policy-includes" class="form-label">Bao gồm</label>
                                <textarea class="form-control" id="tour-policy-includes" rows="5"></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="tour-policy-excludes" class="form-label">Không bao gồm</label>
                                <textarea class="form-control" id="tour-policy-excludes" rows="5"></textarea>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <h4>Lịch trình chi tiết</h4>
                            <div id="itinerary-manager">
                                <div id="itinerary-list" class="mb-3">
                                    <p><i>Vui lòng lưu Tour trước khi thêm lịch trình.</i></p>
                                </div>
                                <button type="button" id="add-itinerary-item-btn" class="btn btn-sm btn-success" disabled>
                                    <i class="bi bi-plus-circle me-2"></i> Thêm ngày
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                <button type="button" id="modal-save-tour-btn" class="btn btn-primary">Lưu thông tin cơ bản</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="tour-schedule-modal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Quản lý Lịch Khởi Hành: <span id="schedule-tour-title" class="text-primary"></span></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="card mb-3 border-warning">
                    <div class="card-header bg-warning text-dark py-1"><strong>Thêm ngày khởi hành mới</strong></div>
                    <div class="card-body p-2">
                        <form id="add-schedule-form" class="row g-2 align-items-end">
                            <input type="hidden" id="schedule-tour-id">
                            <div class="col-md-4">
                                <label for="sched-start" class="form-label small mb-1">Ngày đi</label>
                                <input type="date" class="form-control form-control-sm" id="sched-start" required>
                            </div>
                            <div class="col-md-4">
                                <label for="sched-price" class="form-label small mb-1">Giá (VND)</label>
                                <input type="number" class="form-control form-control-sm" id="sched-price" placeholder="VD: 2990000" required>
                            </div>
                            <div class="col-md-2">
                                <label for="sched-seats" class="form-label small mb-1">Số chỗ</label>
                                <input type="number" class="form-control form-control-sm" id="sched-seats" value="20">
                            </div>
                            <div class="col-md-2">
                                <button type="submit" class="btn btn-sm btn-success w-100">Thêm</button>
                            </div>
                        </form>
                    </div>
                </div>
                <h6>Danh sách lịch trình hiện có:</h6>
                <div class="table-responsive" style="max-height: 300px; overflow-y: auto;">
                    <table class="table table-sm table-bordered table-hover align-middle" id="table-schedules">
                        <thead class="table-light sticky-top">
                            <tr>
                                <th>Ngày đi</th>
                                <th>Ngày về</th>
                                <th>Giá (Người lớn)</th>
                                <th>Chỗ</th>
                                <th class="text-center">Xóa</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="monthDetailsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title">Chi tiết doanh thu tháng <span id="modal-month-title" class="fw-bold"></span></h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-0">
                <table class="table table-striped table-hover mb-0">
                    <thead class="table-light sticky-top">
                        <tr>
                            <th>Mã Đơn</th>
                            <th>Loại</th>
                            <th>Tên Dịch Vụ</th>
                            <th>Khách Hàng</th>
                            <th>Ngày Đặt</th>
                            <th class="text-end">Thành Tiền</th>
                        </tr>
                    </thead>
                    <tbody id="modal-month-tbody"></tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3">
  <div id="adminToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-warning text-dark">
      <strong class="me-auto"><i class="bi bi-exclamation-triangle-fill"></i> Cảnh báo Tour</strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">
      <span id="toast-message"></span>
      <div class="mt-2 pt-2 border-top">
        <button type="button" class="btn btn-primary btn-sm" id="btn-view-warning-detail">Xem chi tiết</button>
      </div>
    </div>
  </div>
</div>

<div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1060;">
  <div id="adminToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-warning text-dark">
      <strong class="me-auto"><i class="bi bi-exclamation-triangle-fill"></i> Cảnh báo Tour</strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">
      <span id="toast-message"></span>
      <div class="mt-2 pt-2 border-top">
        <button type="button" class="btn btn-primary btn-sm" id="btn-view-warning-detail">Xem chi tiết</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="warningModal" tabindex="-1" aria-labelledby="warningModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-warning">
                <h5 class="modal-title" id="warningModalLabel">Chi tiết Tour Sắp Đầy</h5>
                
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                
            </div>
            <div class="modal-body">
                <h6>Danh sách khách đã đặt:</h6>
                <div class="table-responsive">
                    <table class="table table-bordered table-sm">
                        <thead>
                            <tr>
                                <th>Mã Đơn</th>
                                <th>Tên Khách</th>
                                <th>SĐT</th>
                                <th>Số Lượng</th>
                            </tr>
                        </thead>
                        <tbody id="warning-bookings-table"></tbody>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Chờ đủ số lượng</button>
                <button type="button" class="btn btn-danger" id="btn-lock-tour-now">Khóa Tour Ngay</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/8.0.0/signalr.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<!-- html2pdf (includes html2canvas + jsPDF) - used to export the dashboard area as PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
<script src="js/dashboard.js"></script>
</body>
</html>